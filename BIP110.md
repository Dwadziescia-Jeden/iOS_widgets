# BIP-110 Signaling Widget

Displays BIP-110 soft fork activation status including miner signaling percentage and network node readiness.

<img src="./images/bip110.jpg" style="zoom: 67%;" />

## Features
- Current period miner signaling percentage
- Period progress (blocks mined / 2016)
- Network node readiness percentage
- BIP-110 ready node count
- Bitcoin orange accent theme
- Auto-refresh every 5 minutes

## What is BIP-110?

BIP-110 is a Bitcoin soft fork proposal. Activation requires 55% of blocks in a difficulty period (2016 blocks, ~2 weeks) to signal support via version bit 4.

## Tutorial

1. Install the app "Scriptable" -> [Apple Appstore - Scriptable](https://apps.apple.com/ch/app/scriptable/id1405459188?l=en)
2. Open the app and click the "+" sign on the top right corner
3. Paste the following script:

```js
// Variables used by Scriptable.
// These must be at the very top of the file. Do not edit.
// icon-color: orange; icon-glyph: signal;
// BIP-110 Signaling Widget
// Displays miner signaling and node readiness from thebitcoinportal.com

// API configuration
const API_KEY = "sfkfhoiwrhsh23lsgj";
const API_BASE = "https://thebitcoinportal.com/api";

// Fetch BIP-110 miner signaling data
let signalingPct = "N/A";
let blocksInPeriod = 0;
let periodTotal = 2016;
let periodNumber = "N/A";

try {
  let req = new Request(`${API_BASE}/bip110/status`);
  req.headers = {"X-API-Key": API_KEY};
  let json = await req.loadJSON();
  
  if (json.status === "success" && json.data.current_period) {
    let period = json.data.current_period;
    signalingPct = period.signaling_percentage.toFixed(1);
    blocksInPeriod = period.blocks_in_period;
    periodNumber = period.period_number;
  }
} catch(e) {
  console.log("Error fetching BIP-110 signaling: " + e);
}

// Fetch node readiness data
let nodesPct = "N/A";
let nodesReady = 0;

try {
  let req = new Request(`${API_BASE}/nodes/bip110/status`);
  req.headers = {"X-API-Key": API_KEY};
  let json = await req.loadJSON();
  
  if (json.status === "success" && json.data) {
    nodesPct = json.data.bip110_percentage.toFixed(1);
    nodesReady = json.data.bip110_nodes;
  }
} catch(e) {
  console.log("Error fetching BIP-110 nodes: " + e);
}

let widget = await createWidget();

// Check where the script is running
if (config.runsInWidget) {
  Script.setWidget(widget);
} else {
  widget.presentMedium();
}

Script.complete();

async function createWidget() {
  let w = new ListWidget();
  
  // Refresh every 5 minutes
  let nextRefresh = Date.now() + 1000 * 60 * 5;
  w.refreshAfterDate = new Date(nextRefresh);
  
  // Background
  w.backgroundColor = new Color("#000000");
  
  // Title
  let title = w.addText("BIP-110 Signaling");
  title.centerAlignText();
  title.font = Font.boldSystemFont(16);
  title.textColor = new Color("#F7931A");
  
  w.addSpacer(8);
  
  // Main content - horizontal stack
  let mainStack = w.addStack();
  mainStack.layoutHorizontally();
  mainStack.centerAlignContent();
  
  // Left column - Miner Signaling
  let leftCol = mainStack.addStack();
  leftCol.layoutVertically();
  leftCol.size = new Size(150, 0);
  
  let minerLabel = leftCol.addText("Miners");
  minerLabel.font = Font.mediumSystemFont(12);
  minerLabel.textColor = new Color("#888888");
  
  let minerValue = leftCol.addText(signalingPct + "%");
  minerValue.font = Font.boldSystemFont(32);
  minerValue.textColor = new Color("#FFFFFF");
  
  // Progress bar for period
  let progressStack = leftCol.addStack();
  progressStack.layoutHorizontally();
  progressStack.spacing = 2;
  
  let progressPct = Math.min(blocksInPeriod / periodTotal, 1);
  let filledBars = Math.round(progressPct * 10);
  
  for (let i = 0; i < 10; i++) {
    let bar = progressStack.addText(i < filledBars ? "▓" : "░");
    bar.font = Font.systemFont(8);
    bar.textColor = i < filledBars ? new Color("#F7931A") : new Color("#333333");
  }
  
  let periodText = leftCol.addText(`${blocksInPeriod}/${periodTotal} blocks`);
  periodText.font = Font.systemFont(10);
  periodText.textColor = new Color("#666666");
  
  // Spacer between columns
  mainStack.addSpacer();
  
  // Right column - Node Readiness
  let rightCol = mainStack.addStack();
  rightCol.layoutVertically();
  rightCol.size = new Size(150, 0);
  
  let nodeLabel = rightCol.addText("Nodes");
  nodeLabel.font = Font.mediumSystemFont(12);
  nodeLabel.textColor = new Color("#888888");
  
  let nodeValue = rightCol.addText(nodesPct + "%");
  nodeValue.font = Font.boldSystemFont(32);
  nodeValue.textColor = new Color("#FFFFFF");
  
  let nodeCount = rightCol.addText(`${nodesReady.toLocaleString()} ready`);
  nodeCount.font = Font.systemFont(11);
  nodeCount.textColor = new Color("#F7931A");
  
  w.addSpacer(4);
  
  // Footer - threshold info
  let footer = w.addText("55% threshold required");
  footer.centerAlignText();
  footer.font = Font.systemFont(9);
  footer.textColor = new Color("#555555");
  
  return w;
}
```

4. Click on the bottom left corner the "sliders" to name your script. For example: BIP-110
5. Click close and done
6. Go to the homescreen, press and hold for a few seconds to make the icons move. Tap on the top left corner the "+" symbol

<img src="./images/2.PNG" style="zoom: 50%;" />

7. Scroll down until you find the "Scriptable" App. Select it and choose the **medium** widget size.

<img src="./images/3.PNG" style="zoom: 30%;" />

8. Click "Add Widget" and tap the new created widget to edit it. Select the created script and you're done!

<img src="./images/5.PNG" style="zoom: 30%;" />

## Data Source

Data is fetched from [The Bitcoin Portal](https://thebitcoinportal.com/nodes/bip110).

## Understanding the Display

- **Miners %** - Percentage of blocks in the current period signaling BIP-110 support
- **Progress bar** - How far into the current 2016-block difficulty period
- **Nodes %** - Percentage of network nodes running BIP-110 compatible software
- **Nodes ready** - Absolute count of BIP-110 ready nodes (primarily Bitcoin Knots)

Activation requires 55% miner signaling within a single difficulty period.
